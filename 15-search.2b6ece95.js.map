{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEOC,eAAeC,EAAWC,EAAM,GAAIC,EAAK,IAC5C,MACMC,EAAS,IAAIC,gBAAgB,CAC/BC,IAAK,qCACLC,EAAGL,EACHM,WAAY,QACZC,YAAa,aACbC,YAAY,EACZP,KAAMA,EACNQ,SAAU,KAGd,aAAab,EAAAc,QAAMC,IAAI,6BAAaT,KAAUU,MAAKC,GAAoBA,EAASC,M,CCd7E,SAASC,EAAWb,GACvB,OAAOA,EACNc,KACG,EAACC,cACGA,EAAaC,aACbA,EAAYC,KACZA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KACE,2DAEQL,WAAsBC,wJAIzBC,gHAIAC,mHAIAC,oHAIAC,uEAKbC,KAAK,G,CClCX,IAAAC,EAAA5B,EAAA,SAEA,MAQM6B,EAAO,IACFC,EAAAF,GAASG,OAAOC,KAAK,8DAO1BC,EAAU,IACLH,EAAAF,GAASM,QAAQC,OAAO,wCAG7BC,EAAY,IACPN,EAAAF,GAASM,QAAQG,SCtBtBC,GADOC,SAASC,cAAc,QACvBD,SAASC,cAAc,SAQ9BC,EAAUF,SAASC,cAAc,YAGvC,IAIIE,EAJAC,EAAUJ,SAASC,cAAc,YAEjCI,EAAO,EACPC,EAAa,GAGjBJ,EAAQK,MAAMC,QAAU,OAExBT,EAAKU,iBAAiB,UAGtB/C,eAAyBgD,GACrBA,EAAMC,iBAENP,EAAQQ,UAAW,GACnBP,EAAO,EAEPC,EAAcI,EAAMG,cAAcC,SAASC,YAAYC,MAAMC,OAC7DvB,IAEA,IACI,MAAMwB,KAACA,EAAIC,UAAEA,SAAmBxD,EAAW2C,EAAaD,GAKxD,GAJAR,IAEAM,EAAWiB,KAAKC,KAAMF,EAAY,IAEd,KAAhBb,GAAmC,IAAba,EAEtB,OADAjB,EAAQK,MAAMC,QAAU,ODhCzBjB,EAAAF,GAASG,OAAO8B,QAAQ,2ECoC3BpB,EAAQK,MAAMC,QAAS,QDxCpBjB,EAAAF,GAASG,OAAO+B,QAAQ,sCC2C3BnB,EAAQoB,mBAAmB,YAAa7C,EAAWuC,IAE/Cb,GAAQF,IACRD,EAAQK,MAAMC,QAAS,OACvBlB,I,CAEN,MAAOmC,GACLA,EAAMA,EAAMC,Q,KAhCpBxB,EAAQO,iBAAiB,SAsCzB/C,eAA2BgD,GACvBA,EAAMC,iBACNN,GAAM,EACNX,IACA,IACI,MAAMwB,KAACA,SAAcvD,EAAW2C,EAAaD,GAC7CR,IACIQ,GAAQF,IACRD,EAAQK,MAAMC,QAAS,OACvBlB,KAEJc,EAAQoB,mBAAmB,YAAa7C,EAAWuC,G,CACrD,MAAOS,GACLA,EAAMA,EAAMD,Q","sources":["src/js/pixabay.js","src/js/markup.js","src/js/notiflix.js","src/js/15-search.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchHints(query=\"\", page=\"\") {\n    const apiUrl = \"https://pixabay.com/api/?\";\n    const params = new URLSearchParams({\n        key: \"41264181-83fac7734f961e185fe372492\",\n        q: query,\n        image_type: \"photo\",\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 40,\n        \n    });\n    return await axios.get(`${apiUrl}&${params}`).then(response => {return response.data});\n}","export function markupCard(params) {\n    return params\n    .map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes ,\n            views ,\n            comments ,\n            downloads \n        }) => `\n        <div class=\"photo-card\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"310px\"/>\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b><br>\n              <b>${likes}</b>\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b><br>\n              <b>${views}</b>\n            </p>\n            <p class=\"info-item\">\n              <b>Comments</b><br>\n              <b>${comments}</b>\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b><br>\n              <b>${downloads}</b>\n            </p>\n          </div>\n       </div>\n        `\n    ).join(\"\");\n}","import Notiflix from 'notiflix'\n\nconst success = params => {\n    return Notiflix.Notify.success(`Hooray! We found totalHits images.`)\n};\n\nconst warning = () => {\n    return Notiflix.Notify.failure(`Sorry, there are no images matching your search query. Please try again`)\n};\n\nconst info = () => {\n    return Notiflix.Notify.info(`We're sorry, but you've reached the end of search results.`)\n};\n\nconst error = (error) => {\n    return Notiflix.Notify.failure(error)\n};\n\nconst loading = () => {\n    return Notiflix.Loading.arrows(`Please wait. We need some seconds...`)\n};\n\nconst reLoading = () => {\n    return Notiflix.Loading.remove()\n};\n\nexport {success, warning, info, error, loading, reLoading}","const body = document.querySelector(\"body\");\nconst form = document.querySelector(\"form\");\n\n//\nimport { fetchHints } from \"./pixabay\";\nimport{markupCard} from \"./markup\";\nimport {success, warning, info, error, loading, reLoading} from \"./notiflix\";\n\n\nconst btnLoad = document.querySelector(\".loading\");\n\n\nlet gallery = document.querySelector(\".gallery\")\n\nlet page = 1;\nlet searchQuery =\"\";\nlet maxPages;\n\nbtnLoad.style.display = 'none';\n\nform.addEventListener(\"submit\", handleSub);\nbtnLoad.addEventListener('click', handleClick);\n\nasync function handleSub(event) {\n    event.preventDefault();\n\n    gallery.innerHTML ='';\n    page = 1;\n\n    searchQuery = event.currentTarget.elements.searchQuery.value.trim();\n    loading();\n    \n    try {\n        const {hits, totalHits} = await fetchHints(searchQuery, page);\n        reLoading();\n\n        maxPages = Math.ceil (totalHits / 40);\n\n        if (searchQuery === '' || totalHits ===0) {\n            btnLoad.style.display = 'none';\n            return warning()\n        }\n\n        btnLoad.style.display =\"block\";\n        success(totalHits);\n\n        gallery.insertAdjacentHTML('beforeend', markupCard(hits));\n\n        if (page >= maxPages) {\n            btnLoad.style.display =\"none\";\n            info()\n        }\n    } catch (error) {\n        error(error.message)\n    }\n    \n}\n\n\nasync function handleClick(event) {\n    event.preventDefault();\n    page+=1;\n    loading();\n    try {\n        const {hits} = await fetchHints(searchQuery, page);\n        reLoading();\n        if (page >= maxPages) {\n            btnLoad.style.display ='none';\n            info()\n        }\n        gallery.insertAdjacentHTML('beforeend', markupCard(hits))\n    } catch (error) {\n        error(error.message)\n    }\n}"],"names":["$2shzp","parcelRequire","async","$9b3bf443d3cc2ade$export$28f45446fd700320","query","page","params","URLSearchParams","key","q","image_type","orientation","safesearch","per_page","default","get","then","response","data","$263aef85a4d00bfb$export$7c6f20cf2792bee5","map","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","$1GAPJ","$bff3a910d0e32609$export$a80b3bd66acc52ff","$parcel$interopDefault","Notify","info","$bff3a910d0e32609$export$46c1c92549715335","Loading","arrows","$bff3a910d0e32609$export$e0b6bff41558691b","remove","$81ea510df4634ec0$var$form","document","querySelector","$81ea510df4634ec0$var$btnLoad","$81ea510df4634ec0$var$maxPages","$81ea510df4634ec0$var$gallery","$81ea510df4634ec0$var$page","$81ea510df4634ec0$var$searchQuery","style","display","addEventListener","event","preventDefault","innerHTML","currentTarget","elements","searchQuery","value","trim","hits","totalHits","Math","ceil","failure","success","insertAdjacentHTML","error1","message","error2"],"version":3,"file":"15-search.2b6ece95.js.map"}